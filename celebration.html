<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1.0, user-scalable=no">
    <title>üíñ Momo Said Yes! üíñ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            min-height: 100%;
        }

        body {
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            font-family: 'Georgia', serif;
            overflow-x: hidden;
            position: relative;
        }

        /* Confetti Canvas */
        #confettiCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        /* Main Content */
        .celebration-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            position: relative;
            z-index: 10;
        }

        /* Floating Background */
        .floating-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .floating-item {
            position: absolute;
            animation: float-around 15s ease-in-out infinite;
            opacity: 0.4;
        }

        @keyframes float-around {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-30px) rotate(10deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(30px) rotate(-10deg); }
        }

        /* Decorative elements */
        .decoration {
            position: fixed;
            font-size: 45px;
            opacity: 0.7;
            animation: gentle-float 4s ease-in-out infinite;
            z-index: 5;
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.3));
        }

        .deco-1 { top: 5%; left: 3%; animation-delay: 0s; }
        .deco-2 { top: 8%; right: 5%; animation-delay: 0.5s; }
        .deco-3 { bottom: 10%; left: 5%; animation-delay: 1s; }
        .deco-4 { bottom: 8%; right: 3%; animation-delay: 1.5s; }
        .deco-5 { top: 50%; left: 2%; animation-delay: 2s; }
        .deco-6 { top: 45%; right: 2%; animation-delay: 2.5s; }

        @keyframes gentle-float {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }

        /* Big Animated Heart */
        .mega-heart {
            font-size: 100px;
            animation: mega-heartbeat 1s ease-in-out infinite;
            filter: drop-shadow(0 0 50px rgba(255,105,180,0.8));
            margin-bottom: 20px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .mega-heart:hover {
            transform: scale(1.2);
        }

        @keyframes mega-heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        /* Main Message */
        .main-message {
            text-align: center;
            animation: fade-in-up 1s ease-out 0.3s both;
        }

        @keyframes fade-in-up {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .yay-text {
            font-size: 3rem;
            color: #ffffff;
            text-shadow: 
                0 0 20px rgba(255,105,180,1),
                0 0 40px rgba(168,85,247,0.8);
            margin-bottom: 15px;
        }

        .yay-text .name-celebrate {
            display: block;
            font-size: 3.5rem;
            background: linear-gradient(135deg, #ffd700, #ffaa00, #fff176);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 20px rgba(255,215,0,0.6));
        }

        .sub-message {
            font-size: 1.5rem;
            color: #c8c8e0;
            margin-bottom: 30px;
        }

        /* Love Letter Card */
        .love-card {
            background: linear-gradient(145deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            border-radius: 30px;
            padding: 45px 55px;
            max-width: 650px;
            width: 90%;
            text-align: center;
            box-shadow: 
                0 25px 60px rgba(0,0,0,0.5),
                0 0 80px rgba(255,105,180,0.15);
            border: 2px solid rgba(255,105,180,0.4);
            animation: fade-in-up 1s ease-out 0.6s both;
            position: relative;
            overflow: hidden;
        }

        .love-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(168,85,247,0.1),
                transparent
            );
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .love-title {
            font-size: 1.7rem;
            color: #ff69b4;
            margin-bottom: 25px;
            position: relative;
        }

        .love-text {
            font-size: 1.1rem;
            color: #d0d0e8;
            line-height: 1.9;
            position: relative;
        }

        .love-text p {
            margin-bottom: 18px;
        }

        .love-text .highlight {
            color: #ff69b4;
            font-weight: bold;
        }

        .signature {
            font-style: italic;
            color: #ff69b4;
            font-size: 1.3rem;
            margin-top: 25px;
        }

        /* Corner decorations for card */
        .corner-deco {
            position: absolute;
            font-size: 30px;
            opacity: 0.6;
        }
        .corner-tl { top: 12px; left: 12px; }
        .corner-tr { top: 12px; right: 12px; }
        .corner-bl { bottom: 12px; left: 12px; }
        .corner-br { bottom: 12px; right: 12px; }

        /* ============ INTERACTIVE LOVE JAR ============ */
        .love-jar-section {
            margin-top: 40px;
            animation: fade-in-up 1s ease-out 1s both;
            text-align: center;
        }

        .love-jar-title {
            color: #ffffff;
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(255,105,180,0.5);
        }

        .love-jar-container {
            position: relative;
            display: inline-block;
        }

        .love-jar {
            font-size: 120px;
            cursor: pointer;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 0 30px rgba(255,105,180,0.5));
            animation: jar-wiggle 3s ease-in-out infinite;
        }

        .love-jar:hover {
            transform: scale(1.1) rotate(5deg);
        }

        @keyframes jar-wiggle {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }

        .jar-hint {
            color: #a0a0c0;
            font-size: 0.95rem;
            margin-top: 10px;
            font-style: italic;
        }

        /* Love note popup */
        .love-note-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(145deg, #1a1a2e 0%, #16213e 100%);
            border: 3px solid rgba(255,105,180,0.6);
            border-radius: 25px;
            padding: 40px 50px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            z-index: 2000;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.7),
                0 0 100px rgba(255,105,180,0.3);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .love-note-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .love-note-popup .note-emoji {
            font-size: 50px;
            margin-bottom: 15px;
        }

        .love-note-popup .note-text {
            color: #ffffff;
            font-size: 1.3rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .love-note-popup .note-number {
            color: #a855f7;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .close-note-btn {
            background: linear-gradient(135deg, #ff69b4 0%, #a855f7 100%);
            color: white;
            border: none;
            padding: 12px 35px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            font-family: 'Georgia', serif;
        }

        .close-note-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 25px rgba(255,105,180,0.5);
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .overlay.show {
            opacity: 1;
            pointer-events: all;
        }

        /* ============ INTERACTIVE BUTTONS ============ */
        .buttons-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 30px;
            animation: fade-in-up 1s ease-out 1.3s both;
        }

        .action-btn {
            padding: 15px 35px;
            font-size: 1rem;
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff1493 50%, #a855f7 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(255,105,180,0.4);
        }

        .action-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255,105,180,0.5);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* ============ VIRTUAL HUG ANIMATION - GIF VERSION ============ */
        .hug-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .hug-animation.show {
            animation: hug-gif-appear 3.5s ease-out forwards;
        }

        .hug-gif {
            width: clamp(220px, 55vw, 380px);
            height: auto;
            border-radius: 25px;
            box-shadow: 
                0 25px 70px rgba(0,0,0,0.6),
                0 0 100px rgba(255,105,180,0.5),
                0 0 0 5px rgba(255,105,180,0.3),
                0 0 0 10px rgba(168,85,247,0.2);
            border: 4px solid transparent;
            background: 
                linear-gradient(#1a1a2e, #1a1a2e) padding-box,
                linear-gradient(135deg, #ff69b4, #a855f7, #ffd700, #ff69b4) border-box;
            background-size: 300% 300%;
            animation: gif-border-flow 3s linear infinite;
        }

        @keyframes gif-border-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes hug-gif-appear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.2) rotate(-10deg);
            }
            15% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.15) rotate(3deg);
            }
            25% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            75% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8) rotate(5deg);
            }
        }

        /* Glowing effect when GIF is showing */
        .hug-animation.show .hug-gif {
            animation: gif-glow 1.5s ease-in-out infinite alternate, gif-border-flow 3s linear infinite;
        }

        @keyframes gif-glow {
            0% {
                box-shadow: 
                    0 25px 70px rgba(0,0,0,0.6),
                    0 0 50px rgba(255,105,180,0.4);
            }
            100% {
                box-shadow: 
                    0 25px 70px rgba(0,0,0,0.6),
                    0 0 100px rgba(255,105,180,0.7),
                    0 0 150px rgba(168,85,247,0.4);
            }
        }

        /* Floating hearts around GIF */
        .hug-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .hug-heart {
            position: absolute;
            font-size: 30px;
            opacity: 0;
        }

        .hug-animation.show .hug-heart {
            animation: hug-heart-float 2s ease-out forwards;
        }

        .hug-heart:nth-child(1) { top: 10%; left: 0%; animation-delay: 0.2s; }
        .hug-heart:nth-child(2) { top: 20%; right: 0%; animation-delay: 0.4s; }
        .hug-heart:nth-child(3) { top: 50%; left: -10%; animation-delay: 0.6s; }
        .hug-heart:nth-child(4) { top: 50%; right: -10%; animation-delay: 0.8s; }
        .hug-heart:nth-child(5) { bottom: 20%; left: 5%; animation-delay: 1s; }
        .hug-heart:nth-child(6) { bottom: 20%; right: 5%; animation-delay: 1.2s; }

        @keyframes hug-heart-float {
            0% {
                opacity: 0;
                transform: scale(0) translateY(0);
            }
            50% {
                opacity: 1;
                transform: scale(1.2) translateY(-20px);
            }
            100% {
                opacity: 0;
                transform: scale(0.8) translateY(-50px);
            }
        }

        /* Hug Message */
        .hug-message {
            position: fixed;
            top: calc(50% + 220px);
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            font-size: 1.4rem;
            text-align: center;
            z-index: 3001;
            opacity: 0;
            pointer-events: none;
            background: linear-gradient(135deg, rgba(255,105,180,0.95), rgba(168,85,247,0.95));
            padding: 18px 40px;
            border-radius: 35px;
            box-shadow: 
                0 10px 40px rgba(255,105,180,0.5),
                0 0 30px rgba(168,85,247,0.3);
            border: 2px solid rgba(255,255,255,0.2);
            max-width: 90%;
            white-space: nowrap;
        }

        .hug-message.show {
            animation: hug-message-appear 3.5s ease-out forwards;
        }

        @keyframes hug-message-appear {
            0% { 
                opacity: 0; 
                transform: translateX(-50%) translateY(30px) scale(0.8);
            }
            15% { 
                opacity: 1; 
                transform: translateX(-50%) translateY(0) scale(1);
            }
            75% { 
                opacity: 1; 
                transform: translateX(-50%) translateY(0) scale(1);
            }
            100% { 
                opacity: 0; 
                transform: translateX(-50%) translateY(-20px) scale(0.9);
            }
        }

        /* ============ LOVE METER - MORPHING INFINITY ============ */
        .love-meter-section {
            margin-top: 40px;
            text-align: center;
            animation: fade-in-up 1s ease-out 1.6s both;
        }

        .love-meter-title {
            color: #c8c8e0;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        /* Main meter wrapper */
        .love-meter-wrapper {
            position: relative;
            width: 300px;
            height: 80px;
            max-width: 90%;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Regular Bar Container */
        .love-meter-container {
            width: 100%;
            height: 35px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid rgba(255,105,180,0.3);
            position: absolute;
            cursor: pointer;
            transition: all 0.5s ease;
        }

        .love-meter-container:hover {
            border-color: rgba(255,105,180,0.6);
            box-shadow: 0 0 20px rgba(255,105,180,0.3);
        }

        .love-meter-container.morphing {
            opacity: 0;
            transform: scaleX(0);
        }

        .love-meter-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff69b4, #ff1493, #a855f7, #ff69b4);
            background-size: 300% 100%;
            animation: love-meter-flow 2s linear infinite;
            border-radius: 18px;
            transition: width 0.3s ease;
            width: 0%;
        }

        @keyframes love-meter-flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        /* Shared gradient flow animation */
        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        /* ============ INFINITY SYMBOL ============ */
        .infinity-container {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transform: scale(0);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            pointer-events: none;
        }

        .infinity-container.show {
            opacity: 1;
            transform: scale(1);
        }

        /* Infinity SVG Container */
        .infinity-svg-wrapper {
            width: 200px;
            height: 80px;
            position: relative;
        }

        /* The infinity path */
        .infinity-path {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Gradient animation on the stroke */
        .infinity-path-bg {
            stroke: rgba(255,255,255,0.1);
        }

        .infinity-path-fill {
            stroke: url(#infinityGradient);
            stroke-dasharray: 300;
            stroke-dashoffset: 0;
            animation: infinity-flow 2s linear infinite;
        }

        @keyframes infinity-flow {
            0% {
                stroke-dashoffset: 0;
            }
            100% {
                stroke-dashoffset: -300;
            }
        }

        /* Glowing effect */
        .infinity-container.show .infinity-svg-wrapper {
            filter: drop-shadow(0 0 15px rgba(255,105,180,0.8))
                    drop-shadow(0 0 30px rgba(168,85,247,0.5));
            animation: infinity-glow 1s ease-in-out infinite alternate;
        }

        @keyframes infinity-glow {
            0% {
                filter: drop-shadow(0 0 15px rgba(255,105,180,0.8))
                        drop-shadow(0 0 30px rgba(168,85,247,0.5));
            }
            100% {
                filter: drop-shadow(0 0 25px rgba(255,215,0,0.9))
                        drop-shadow(0 0 50px rgba(255,105,180,0.7));
            }
        }

        /* Sparkles around infinity */
        .infinity-sparkle {
            position: absolute;
            font-size: 20px;
            animation: sparkle-float 1s ease-in-out infinite;
        }

        .infinity-sparkle:nth-child(1) { top: -10px; left: 20%; animation-delay: 0s; }
        .infinity-sparkle:nth-child(2) { top: -5px; right: 20%; animation-delay: 0.3s; }
        .infinity-sparkle:nth-child(3) { bottom: -10px; left: 30%; animation-delay: 0.6s; }
        .infinity-sparkle:nth-child(4) { bottom: -5px; right: 30%; animation-delay: 0.9s; }

        @keyframes sparkle-float {
            0%, 100% { transform: translateY(0) scale(1); opacity: 1; }
            50% { transform: translateY(-5px) scale(1.2); opacity: 0.8; }
        }

        .love-meter-text {
            color: #ff69b4;
            font-size: 1.1rem;
            margin-top: 15px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-height: 30px;
        }

        .love-meter-text.infinity-text {
            background: linear-gradient(90deg, #ff69b4, #ffd700, #a855f7, #ff69b4);
            background-size: 300% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-flow 2s linear infinite;
            font-size: 1.3rem;
        }



        /* ============ COUNTDOWN ============ */
        .countdown-section {
            margin-top: 40px;
            text-align: center;
            animation: fade-in-up 1s ease-out 1.9s both;
        }

        .countdown-title {
            color: #c8c8e0;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .countdown {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .countdown-item {
            background: linear-gradient(145deg, rgba(168,85,247,0.2) 0%, rgba(255,105,180,0.15) 100%);
            padding: 18px 22px;
            border-radius: 15px;
            min-width: 75px;
            border: 1px solid rgba(255,105,180,0.3);
        }

        .countdown-number {
            font-size: 1.8rem;
            color: #ffffff;
            font-weight: bold;
        }

        .countdown-label {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.6);
            text-transform: uppercase;
        }

        /* ============ CLICK HEARTS ============ */
        .click-heart {
            position: fixed;
            pointer-events: none;
            animation: pop-heart 1s ease-out forwards;
            z-index: 999;
        }

        @keyframes pop-heart {
            0% {
                opacity: 1;
                transform: scale(0) translateY(0);
            }
            50% {
                opacity: 1;
                transform: scale(1.3) translateY(-20px);
            }
            100% {
                opacity: 0;
                transform: scale(0.8) translateY(-50px);
            }
        }

        /* ============ SPARKLE CURSOR ============ */
        .sparkle {
            position: fixed;
            pointer-events: none;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: radial-gradient(circle, #ff69b4, transparent);
            animation: sparkle-fade 0.6s ease-out forwards;
            z-index: 9999;
        }

        @keyframes sparkle-fade {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(2); }
        }

        /* ============ EMOJI RAIN ============ */
        .emoji-rain {
            position: fixed;
            animation: rain-fall linear forwards;
            font-size: 28px;
            z-index: 500;
            pointer-events: none;
        }

        @keyframes rain-fall {
            0% {
                opacity: 1;
                transform: translateY(-50px) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Meter fill indicator */
        .meter-fill-indicator {
            position: fixed;
            font-size: 25px;
            pointer-events: none;
            z-index: 1001;
            animation: float-to-meter 0.8s ease-out forwards;
        }

        @keyframes float-to-meter {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0.5) translateY(-50px);
            }
        }

        /* ============ MUSIC BUTTON ============ */
        .music-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff69b4, #a855f7);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            cursor: pointer;
            font-size: 22px;
            z-index: 9999;
            box-shadow: 0 5px 25px rgba(255,105,180,0.5);
            transition: all 0.3s ease;
            animation: pulse-music 2s ease-in-out infinite;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .music-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 8px 35px rgba(255,105,180,0.7);
        }

        .music-btn.playing {
            animation: none;
            background: linear-gradient(135deg, #a855f7, #667eea);
        }

        .music-btn.playing::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid rgba(255,105,180,0.5);
            animation: music-wave 1.5s ease-out infinite;
        }

        @keyframes pulse-music {
            0%, 100% { 
                box-shadow: 0 5px 25px rgba(255,105,180,0.5);
            }
            50% { 
                box-shadow: 0 5px 25px rgba(255,105,180,0.8), 
                            0 0 0 12px rgba(255,105,180,0.15);
            }
        }

        @keyframes music-wave {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }

        .music-btn.playing .music-bars {
            display: flex;
        }

        .music-bars {
            display: none;
            gap: 2px;
            height: 20px;
            align-items: flex-end;
        }

        .music-bar {
            width: 3px;
            background: white;
            border-radius: 2px;
            animation: bar-dance 0.5s ease-in-out infinite;
        }

        .music-bar:nth-child(1) { height: 8px; animation-delay: 0s; }
        .music-bar:nth-child(2) { height: 16px; animation-delay: 0.1s; }
        .music-bar:nth-child(3) { height: 12px; animation-delay: 0.2s; }
        .music-bar:nth-child(4) { height: 18px; animation-delay: 0.3s; }

        @keyframes bar-dance {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(0.5); }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .yay-text { font-size: 2.2rem; }
            .yay-text .name-celebrate { font-size: 2.6rem; }
            .sub-message { font-size: 1.2rem; }
            .love-card { padding: 30px 20px; }
            .love-title { font-size: 1.3rem; }
            .love-text { font-size: 1rem; }
            .mega-heart { font-size: 70px; }
            .love-jar { font-size: 90px; }
            .decoration { font-size: 35px; }
            .buttons-row { gap: 10px; }
            .action-btn { padding: 12px 25px; font-size: 0.9rem; }
            .love-note-popup { padding: 30px 25px; }
            .love-note-popup .note-text { font-size: 1.1rem; }
            .love-meter-wrapper { width: 250px; }
            .love-meter-container { height: 30px; }
            .infinity-svg-wrapper { width: 160px; height: 65px; }
            .infinity-path { stroke-width: 6; }
            .hug-gif { width: clamp(180px, 70vw, 280px); }
            .hug-message { 
                font-size: 1.1rem; 
                top: calc(50% + 170px);
                white-space: normal;
                padding: 15px 25px;
            }
        }
    </style>
</head>
<body>
    <!-- Confetti Canvas -->
    <canvas id="confettiCanvas"></canvas>

    <!-- Floating Background -->
    <div class="floating-bg" id="floatingBg"></div>

    <!-- Decorative Elements -->
    <div class="decoration deco-1">üß∏</div>
    <div class="decoration deco-2">üå∏</div>
    <div class="decoration deco-3">üíê</div>
    <div class="decoration deco-4">üß∏</div>
    <div class="decoration deco-5">üå∫</div>
    <div class="decoration deco-6">üå∑</div>

    <!-- Main Content -->
    <div class="celebration-container">
        <div class="mega-heart" id="megaHeart" onclick="handleInteraction(event, 'heart')">üíñ</div>
        
        <div class="main-message">
            <h1 class="yay-text">
                Yayy!!!üéâ
                <span class="name-celebrate">Aloo Said Yes!</span>
            </h1>
            <p class="sub-message">You just made Bhindi the happiest person ever! üíï</p>
        </div>

        <div class="love-card">
            <span class="corner-deco corner-tl">ü¶ã</span>
            <span class="corner-deco corner-tr">ü¶ã</span>
            <span class="corner-deco corner-bl">‚ú®</span>
            <span class="corner-deco corner-br">‚ú®</span>
            
            <h2 class="love-title">üíå My Dearest Aloo üíå</h2>
            
            <div class="love-text">
                
                <p>From the moment that I gave you handshake at our first Treble event, you were poking at my heart. And at the day we went out for coffee
                together, you stole it completely. You're a thief bitch! After that stole my watch also. But I love this robber. Cause she's mota, and chota. 
                But above it all, she has pretty eyes.....and an even prettier heart. ‚ù§Ô∏è </p>
                <p>Yea it all sounds cringe. Kya karuun, you have a cringey bf. My biggest regret is not getting you for this valentines.
                I would have bited you, and maybe a kiss after. JK!!! Only <span class="highlight">hugs & kisses</span> for my Bachiii.‚ú®</p>
                
                
                <p>See you soon mister, we have a lot of punishments to settle. Hehe üí´</p>
                
                <p>Here's to us, to love, and to countless beautiful memories together! üíï</p>
                
                <p class="signature">Forever & Always, ‚ù§Ô∏è<br>Your Bhindi</p>
            </div>
        </div>

        <!-- Interactive Buttons -->
        <div class="buttons-row">
            <button class="action-btn" onclick="handleInteraction(event, 'confetti')">üéâ More Confetti!</button>
            <button class="action-btn secondary" onclick="handleInteraction(event, 'hug')">ü§ó Send a Hug!</button>
        </div>

        <!-- Love Jar Section -->
        <div class="love-jar-section">
            <h3 class="love-jar-title">‚ú® Tap the jar to see why I love you! ‚ú®</h3>
            <div class="love-jar-container">
                <div class="love-jar" onclick="handleInteraction(event, 'jar')">üè∫</div>
            </div>
            <p class="jar-hint">Each tap reveals a reason & fills the love meter! üíï</p>
        </div>

        <!-- Love Meter - MORPHING INFINITY -->
        <div class="love-meter-section">
            <p class="love-meter-title">üíï Our Love Meter üíï</p>
            
            <div class="love-meter-wrapper">
                <!-- Regular Bar -->
                <div class="love-meter-container" id="loveMeterContainer" onclick="handleInteraction(event, 'meter')">
                    <div class="love-meter-fill" id="loveMeterFill"></div>
                </div>

                <!-- Infinity Symbol (Hidden by default) -->
                <div class="infinity-container" id="infinityContainer">
                    <span class="infinity-sparkle">‚ú®</span>
                    <span class="infinity-sparkle">üíñ</span>
                    <span class="infinity-sparkle">‚ú®</span>
                    <span class="infinity-sparkle">üíñ</span>
                    
                    <div class="infinity-svg-wrapper">
                        <svg viewBox="0 0 200 80" xmlns="http://www.w3.org/2000/svg">
                            <!-- Gradient Definition -->
                            <defs>
                                <linearGradient id="infinityGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#ff69b4">
                                        <animate attributeName="stop-color" 
                                            values="#ff69b4;#ff1493;#a855f7;#ffd700;#ff69b4" 
                                            dur="3s" repeatCount="indefinite"/>
                                    </stop>
                                    <stop offset="25%" style="stop-color:#ff1493">
                                        <animate attributeName="stop-color" 
                                            values="#ff1493;#a855f7;#ffd700;#ff69b4;#ff1493" 
                                            dur="3s" repeatCount="indefinite"/>
                                    </stop>
                                    <stop offset="50%" style="stop-color:#a855f7">
                                        <animate attributeName="stop-color" 
                                            values="#a855f7;#ffd700;#ff69b4;#ff1493;#a855f7" 
                                            dur="3s" repeatCount="indefinite"/>
                                    </stop>
                                    <stop offset="75%" style="stop-color:#ffd700">
                                        <animate attributeName="stop-color" 
                                            values="#ffd700;#ff69b4;#ff1493;#a855f7;#ffd700" 
                                            dur="3s" repeatCount="indefinite"/>
                                    </stop>
                                    <stop offset="100%" style="stop-color:#ff69b4">
                                        <animate attributeName="stop-color" 
                                            values="#ff69b4;#ff1493;#a855f7;#ffd700;#ff69b4" 
                                            dur="3s" repeatCount="indefinite"/>
                                    </stop>
                                </linearGradient>
                            </defs>
                            
                            <!-- Background Path -->
                            <path class="infinity-path infinity-path-bg" 
                                d="M100,40 C100,40 130,10 160,10 C190,10 190,70 160,70 C130,70 100,40 100,40 C100,40 70,10 40,10 C10,10 10,70 40,70 C70,70 100,40 100,40"/>
                            
                            <!-- Animated Fill Path -->
                            <path class="infinity-path infinity-path-fill" 
                                d="M100,40 C100,40 130,10 160,10 C190,10 190,70 160,70 C130,70 100,40 100,40 C100,40 70,10 40,10 C10,10 10,70 40,70 C70,70 100,40 100,40"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <p class="love-meter-text" id="loveMeterText">Tap anywhere to fill with love!</p>
        </div>

        <!-- Countdown -->
        <div class="countdown-section" id="countdownSection">
            <p class="countdown-title">‚è∞ Countdown to Valentine's Day 2025 ‚è∞</p>
            <div class="countdown" id="countdown">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">00</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay for popups -->
    <div class="overlay" id="overlay" onclick="closeLoveNote()"></div>

    <!-- Love Note Popup -->
    <div class="love-note-popup" id="loveNotePopup">
        <div class="note-emoji" id="noteEmoji">üíï</div>
        <p class="note-number" id="noteNumber">Reason #1</p>
        <p class="note-text" id="noteText">Loading...</p>
        <button class="close-note-btn" onclick="closeLoveNote()">More Love! üíñ</button>
    </div>

    <!-- Virtual Hug Animation - GIF VERSION -->
    <div class="hug-animation" id="hugAnimation">
        <!-- Floating hearts around the GIF -->
        <div class="hug-hearts">
            <span class="hug-heart">üíï</span>
            <span class="hug-heart">üíñ</span>
            <span class="hug-heart">üíó</span>
            <span class="hug-heart">üíì</span>
            <span class="hug-heart">üíù</span>
            <span class="hug-heart">ü§ó</span>
        </div>
        <!-- Replace 'hug.gif' with your actual GIF filename -->
        <img src="bear-hug2.webp" alt="Virtual Hug" class="hug-gif">
    </div>
    <div class="hug-message" id="hugMessage">Sending you the biggest virtual hug, Khushi! ü§óüíñ</div>

    <!-- Background Music -->
    <audio id="bgMusic" loop preload="metadata" crossorigin="anonymous">
        <source src="./Cupid.mp3" type="audio/mpeg">
        <source src="Cupid.mp3" type="audio/mpeg">
    </audio>

    <!-- Music Control Button -->
    <button id="musicToggle" class="music-btn">üéµ</button>

    <script>
        // ========== CONFETTI SYSTEM ==========
        const canvas = document.getElementById('confettiCanvas');
        const ctx = canvas.getContext('2d');
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        const confettiColors = ['#ff69b4', '#ff1493', '#a855f7', '#ffb6c1', '#ff85a2', '#ffd700', '#ffffff', '#ee82ee', '#da70d6'];
        const confettiShapes = ['circle', 'square', 'heart', 'star'];
        
        let confettiParticles = [];

        class Confetti {
            constructor(fromCenter = false) {
                this.reset(fromCenter);
            }

            reset(fromCenter = false) {
                if (fromCenter) {
                    this.x = canvas.width / 2 + (Math.random() - 0.5) * 100;
                    this.y = canvas.height / 2;
                    this.speedY = Math.random() * 15 - 12;
                    this.speedX = Math.random() * 20 - 10;
                } else {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * -canvas.height;
                    this.speedY = Math.random() * 0.5 + 0.2;
                    this.speedX = Math.random() * 0.8 - 0.3;
                }
                this.size = Math.random() * 10 + 5;
                this.color = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                this.shape = confettiShapes[Math.floor(Math.random() * confettiShapes.length)];
                this.rotation = Math.random() * 360;
                this.rotationSpeed = Math.random() * 10 - 5;
                this.wobble = Math.random() * 10;
                this.wobbleSpeed = Math.random() * 0.1;
            }

            update() {
                this.y += this.speedY;
                this.x += this.speedX + Math.sin(this.wobble) * 0.3;
                this.rotation += this.rotationSpeed;
                this.wobble += this.wobbleSpeed;
                this.speedY += 0.005;

                if (this.y > canvas.height + 50) {
                    this.reset(false);
                }
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate((this.rotation * Math.PI) / 180);
                ctx.fillStyle = this.color;

                switch (this.shape) {
                    case 'circle':
                        ctx.beginPath();
                        ctx.arc(0, 0, this.size / 2, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'square':
                        ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                        break;
                    case 'heart':
                        this.drawHeart();
                        break;
                    case 'star':
                        this.drawStar();
                        break;
                }

                ctx.restore();
            }

            drawHeart() {
                const size = this.size;
                ctx.beginPath();
                ctx.moveTo(0, size / 4);
                ctx.bezierCurveTo(size / 2, -size / 4, size / 2, -size / 2, 0, -size / 4);
                ctx.bezierCurveTo(-size / 2, -size / 2, -size / 2, -size / 4, 0, size / 4);
                ctx.fill();
            }

            drawStar() {
                const spikes = 5;
                const outerRadius = this.size / 2;
                const innerRadius = this.size / 4;
                
                ctx.beginPath();
                for (let i = 0; i < spikes * 2; i++) {
                    const radius = i % 2 === 0 ? outerRadius : innerRadius;
                    const angle = (i * Math.PI) / spikes - Math.PI / 2;
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.fill();
            }
        }

        function createConfetti(count = 120) {
            for (let i = 0; i < count; i++) {
                const particle = new Confetti(false);
                particle.y = Math.random() * canvas.height;
                confettiParticles.push(particle);
            }
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            confettiParticles.forEach(particle => {
                particle.update();
                particle.draw();
            });

            requestAnimationFrame(animateConfetti);
        }

        function burstConfetti() {
            for (let i = 0; i < 80; i++) {
                confettiParticles.push(new Confetti(true));
            }
            playPopSound();
            
            if (confettiParticles.length > 350) {
                confettiParticles = confettiParticles.slice(-350);
            }
        }

        // ========== FLOATING BACKGROUND ==========
        function createFloatingItems() {
            const container = document.getElementById('floatingBg');
            const items = ['üíï', 'üíñ', 'üíó', '‚ú®', 'üí´', 'ü¶ã', 'üå∏', 'üíú'];

            for (let i = 0; i < 20; i++) {
                const item = document.createElement('div');
                item.className = 'floating-item';
                item.innerHTML = items[Math.floor(Math.random() * items.length)];
                item.style.left = Math.random() * 100 + 'vw';
                item.style.top = Math.random() * 100 + 'vh';
                item.style.fontSize = (Math.random() * 30 + 20) + 'px';
                item.style.animationDelay = Math.random() * 5 + 's';
                item.style.animationDuration = (Math.random() * 10 + 10) + 's';
                container.appendChild(item);
            }
        }

        // ========== EMOJI RAIN ==========
        function startEmojiRain() {
            const emojis = ['üíï', 'üíñ', 'üå∏', '‚ú®', 'üí´', 'ü¶ã', 'üíó', 'üå∫'];
            
            setInterval(() => {
                const emoji = document.createElement('div');
                emoji.className = 'emoji-rain';
                emoji.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = Math.random() * 100 + 'vw';
                emoji.style.animationDuration = (Math.random() * 4 + 4) + 's';
                document.body.appendChild(emoji);
                
                setTimeout(() => emoji.remove(), 8000);
            }, 700);
        }

        // ========== LOVE JAR ==========
        const loveReasons = [
            { emoji: "üòä", text: "I love your beautiful smile that lights up my entire world." },
            { emoji: "üí≠", text: "I love how you're always on my mind, from morning till night." },
            { emoji: "üéµ", text: "I love your laugh - it's my favorite sound in the universe." },
            { emoji: "ü§ó", text: "I love how safe and warm I feel when I'm with you." },
            { emoji: "‚ú®", text: "I love how you make ordinary moments feel magical." },
            { emoji: "üí™", text: "I love how you support me and believe in me always." },
            { emoji: "ü¶ã", text: "I love the butterflies I still get when I see you." },
            { emoji: "üåü", text: "I love how you inspire me to be a better person every day." },
            { emoji: "ü•∞", text: "I love the way you look at me - like I'm your whole world." },
            { emoji: "üíï", text: "I love that you chose me, and I'd choose you in every lifetime." },
            { emoji: "üåà", text: "I love how you bring color and joy into my life." },
            { emoji: "üíñ", text: "I love you simply because you're YOU, Khushi." },
            { emoji: "üè†", text: "I love how anywhere feels like home when I'm with you." },
            { emoji: "ü§ù", text: "I love that you're my best friend and my soulmate." },
            { emoji: "üí´", text: "I love every little thing about you - the list is endless!" }
        ];

        let currentReasonIndex = 0;

        function openLoveNote() {
            const popup = document.getElementById('loveNotePopup');
            const overlay = document.getElementById('overlay');
            const reason = loveReasons[currentReasonIndex];
            
            document.getElementById('noteEmoji').textContent = reason.emoji;
            document.getElementById('noteText').textContent = reason.text;
            document.getElementById('noteNumber').textContent = `Reason #${currentReasonIndex + 1} of ${loveReasons.length}`;
            
            overlay.classList.add('show');
            popup.classList.add('show');
            
            currentReasonIndex = (currentReasonIndex + 1) % loveReasons.length;
            
            for (let i = 0; i < 20; i++) {
                confettiParticles.push(new Confetti(true));
            }
        }

        function closeLoveNote() {
            const popup = document.getElementById('loveNotePopup');
            const overlay = document.getElementById('overlay');
            
            popup.classList.remove('show');
            overlay.classList.remove('show');
        }

        // ========== VIRTUAL HUG - GIF VERSION ==========
        function sendVirtualHug() {
            const hugAnimation = document.getElementById('hugAnimation');
            const hugMessage = document.getElementById('hugMessage');
            
            // Show hug GIF and message
            hugAnimation.classList.add('show');
            hugMessage.classList.add('show');
            
            // Burst confetti
            burstConfetti();
            
            // Create extra floating hearts around the screen
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    createFloatingHeart();
                }, i * 80);
            }
            
            // Hide after 3.5 seconds (matching animation duration)
            setTimeout(() => {
                hugAnimation.classList.remove('show');
                hugMessage.classList.remove('show');
            }, 3500);
        }

        function createFloatingHeart() {
            const hearts = ['üíï', 'üíñ', 'üíó', 'üíì', 'üíù', 'ü§ó'];
            const heart = document.createElement('div');
            heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.position = 'fixed';
            heart.style.left = (Math.random() * 80 + 10) + 'vw';
            heart.style.top = (Math.random() * 80 + 10) + 'vh';
            heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
            heart.style.pointerEvents = 'none';
            heart.style.zIndex = '2999';
            heart.style.animation = 'pop-heart 1.5s ease-out forwards';
            document.body.appendChild(heart);
            
            setTimeout(() => heart.remove(), 1500);
        }

        // ========== LOVE METER - MORPHING INFINITY ==========
        let loveLevel = 0;
        let isInfinityMode = false;
        let infinityTimeout = null;

        const loveMeterMessages = [
            "Keep tapping! üíï",
            "Love is growing! üíñ",
            "So much love! üíó",
            "Almost there! üíì",
            "Overflowing! üíù"
        ];

        function fillLoveMeter(amount = 10, sourceX = null, sourceY = null) {
            if (sourceX !== null && sourceY !== null) {
                showMeterFillIndicator(sourceX, sourceY);
            }

            if (isInfinityMode) return;

            loveLevel = Math.min(100, loveLevel + amount);
            
            const fill = document.getElementById('loveMeterFill');
            const text = document.getElementById('loveMeterText');
            
            fill.style.width = loveLevel + '%';
            
            if (loveLevel < 20) {
                text.textContent = loveMeterMessages[0];
            } else if (loveLevel < 40) {
                text.textContent = loveMeterMessages[1];
            } else if (loveLevel < 60) {
                text.textContent = loveMeterMessages[2];
            } else if (loveLevel < 80) {
                text.textContent = loveMeterMessages[3];
            } else if (loveLevel < 100) {
                text.textContent = loveMeterMessages[4];
            }
            
            if (loveLevel >= 100) {
                morphToInfinity();
            }
        }

        function morphToInfinity() {
            isInfinityMode = true;
            
            const meterContainer = document.getElementById('loveMeterContainer');
            const infinityContainer = document.getElementById('infinityContainer');
            const text = document.getElementById('loveMeterText');
            
            meterContainer.classList.add('morphing');
            
            setTimeout(() => {
                infinityContainer.classList.add('show');
                text.textContent = '‚àû Infinite Love for Khushi ‚àû';
                text.classList.add('infinity-text');
            }, 300);
            
            burstConfetti();
            
            infinityTimeout = setTimeout(() => {
                morphBackToBar();
            }, 2500);
        }

        function morphBackToBar() {
            const meterContainer = document.getElementById('loveMeterContainer');
            const infinityContainer = document.getElementById('infinityContainer');
            const fill = document.getElementById('loveMeterFill');
            const text = document.getElementById('loveMeterText');
            
            infinityContainer.classList.remove('show');
            
            setTimeout(() => {
                fill.style.transition = 'none';
                fill.style.width = '0%';
                fill.offsetHeight;
                fill.style.transition = 'width 0.3s ease';
                meterContainer.classList.remove('morphing');
                text.textContent = "Let's fill it again! üíï";
                text.classList.remove('infinity-text');
                loveLevel = 0;
                isInfinityMode = false;
            }, 300);
        }

        function showMeterFillIndicator(x, y) {
            const indicators = ['üíï', 'üíñ', '+10', 'üíó', '+5'];
            const indicator = document.createElement('div');
            indicator.className = 'meter-fill-indicator';
            indicator.innerHTML = indicators[Math.floor(Math.random() * indicators.length)];
            indicator.style.left = x + 'px';
            indicator.style.top = y + 'px';
            
            if (indicator.innerHTML.includes('+')) {
                indicator.style.color = '#ffd700';
                indicator.style.fontWeight = 'bold';
                indicator.style.fontSize = '20px';
                indicator.style.textShadow = '0 0 10px rgba(255,215,0,0.8)';
            }
            
            document.body.appendChild(indicator);
            setTimeout(() => indicator.remove(), 800);
        }

                // ========== UNIFIED INTERACTION HANDLER ==========
        function handleInteraction(event, type) {
            const x = event.clientX || event.touches?.[0]?.clientX || window.innerWidth / 2;
            const y = event.clientY || event.touches?.[0]?.clientY || window.innerHeight / 2;
            
            // Always fill the love meter
            fillLoveMeter(10, x, y);
            
            // Create click hearts
            createClickHeart(event);
            
            // Handle specific interactions
            switch(type) {
                case 'confetti':
                    burstConfetti();
                    break;
                case 'hug':
                    sendVirtualHug();
                    break;
                case 'jar':
                    openLoveNote();
                    break;
                case 'heart':
                    burstConfetti();
                    break;
                case 'meter':
                    // Already handled by fillLoveMeter
                    break;
            }
        }

        // ========== CLICK HEARTS ==========
        function createClickHeart(e) {
            const hearts = ['üíï', 'üíñ', 'üíó', 'üíì', 'üíù'];
            const x = e.clientX || e.touches?.[0]?.clientX || window.innerWidth / 2;
            const y = e.clientY || e.touches?.[0]?.clientY || window.innerHeight / 2;
            
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'click-heart';
                    heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = (x - 15 + (Math.random() - 0.5) * 40) + 'px';
                    heart.style.top = (y - 15 + (Math.random() - 0.5) * 40) + 'px';
                    heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
                    document.body.appendChild(heart);
                    
                    setTimeout(() => heart.remove(), 1000);
                }, i * 80);
            }
        }

        // General click handler for the page
        document.addEventListener('click', (e) => {
            if (e.target.closest('.love-jar') || 
                e.target.closest('.action-btn') ||
                e.target.closest('.close-note-btn') ||
                e.target.closest('.mega-heart') ||
                e.target.closest('.love-meter-container') ||
                e.target.closest('.love-meter-wrapper') ||
                e.target.closest('.music-btn')) {
                return;
            }
            
            createClickHeart(e);
            fillLoveMeter(5, e.clientX, e.clientY);
        });

        // ========== SPARKLE CURSOR ==========
        let lastSparkleTime = 0;
        document.addEventListener('mousemove', (e) => {
            const now = Date.now();
            if (now - lastSparkleTime > 50) {
                lastSparkleTime = now;
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = e.clientX - 4 + 'px';
                sparkle.style.top = e.clientY - 4 + 'px';
                sparkle.style.background = Math.random() > 0.5 ? 
                    'radial-gradient(circle, #ff69b4, transparent)' : 
                    'radial-gradient(circle, #a855f7, transparent)';
                document.body.appendChild(sparkle);
                
                setTimeout(() => sparkle.remove(), 600);
            }
        });

        // ========== COUNTDOWN ==========
        function updateCountdown() {
            const valentinesDay = new Date('February 14, 2025 00:00:00').getTime();
            const now = new Date().getTime();
            const distance = valentinesDay - now;

            if (distance < 0) {
                document.getElementById('countdownSection').innerHTML = `
                    <p class="countdown-title" style="color: #ff69b4; font-size: 1.5rem;">üéâ Happy Valentine's Day, Khushi! üéâ</p>
                    <p style="color: #e0e0e0; font-size: 1.2rem; margin-top: 10px;">Today is OUR special day! üíï</p>
                `;
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }

        // ========== SOUND EFFECT ==========
        function playPopSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 600;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.15);
            } catch (e) {
                // Audio not supported
            }
        }

        // ========== KEYBOARD SHORTCUTS ==========
        document.addEventListener('keydown', (e) => {
            // Press 'L' for love burst
            if (e.key.toLowerCase() === 'l') {
                burstConfetti();
                fillLoveMeter(20);
            }
            
            // Press 'H' for hug
            if (e.key.toLowerCase() === 'h') {
                sendVirtualHug();
                fillLoveMeter(15);
            }
            
            // Press 'K' for Khushi special
            if (e.key.toLowerCase() === 'k') {
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        const heart = document.createElement('div');
                        heart.innerHTML = 'üíñ';
                        heart.style.position = 'fixed';
                        heart.style.left = Math.random() * 100 + 'vw';
                        heart.style.top = Math.random() * 100 + 'vh';
                        heart.style.fontSize = (Math.random() * 40 + 20) + 'px';
                        heart.style.pointerEvents = 'none';
                        heart.style.zIndex = '999';
                        heart.style.animation = 'pop-heart 1.5s ease-out forwards';
                        document.body.appendChild(heart);
                        setTimeout(() => heart.remove(), 1500);
                    }, i * 50);
                }
                fillLoveMeter(50);
            }
            
            // Press 'I' for instant infinity mode
            if (e.key.toLowerCase() === 'i') {
                if (!isInfinityMode) {
                    loveLevel = 100;
                    document.getElementById('loveMeterFill').style.width = '100%';
                    morphToInfinity();
                }
            }
            
            // Press 'J' to open love jar
            if (e.key.toLowerCase() === 'j') {
                openLoveNote();
                fillLoveMeter(10);
            }
            
            // Press 'C' for confetti
            if (e.key.toLowerCase() === 'c') {
                burstConfetti();
                fillLoveMeter(10);
            }
            
            // Press 'G' for GIF hug
            if (e.key.toLowerCase() === 'g') {
                sendVirtualHug();
                fillLoveMeter(15);
            }
        });

        // ========== TOUCH SUPPORT FOR MOBILE ==========
        document.addEventListener('touchstart', (e) => {
            if (e.target.closest('.love-jar') || 
                e.target.closest('.action-btn') ||
                e.target.closest('.close-note-btn') ||
                e.target.closest('.mega-heart') ||
                e.target.closest('.love-meter-container') ||
                e.target.closest('.love-meter-wrapper') ||
                e.target.closest('.music-btn')) {
                return;
            }
            
            const touch = e.touches[0];
            createClickHeart({ clientX: touch.clientX, clientY: touch.clientY });
            fillLoveMeter(5, touch.clientX, touch.clientY);
        });

        // ========== INITIALIZE EVERYTHING ==========
        function init() {
            // Create initial confetti
            createConfetti(120);
            animateConfetti();
            
            // Create floating background items
            createFloatingItems();
            
            // Start emoji rain
            startEmojiRain();
            
            // Start countdown
            updateCountdown();
            setInterval(updateCountdown, 1000);

            // Initial confetti burst on page load
            setTimeout(() => {
                burstConfetti();
            }, 500);

            // Auto-fill love meter slowly at start (to show it's interactive)
            setTimeout(() => {
                const autoFillInterval = setInterval(() => {
                    if (loveLevel < 15 && !isInfinityMode) {
                        loveLevel += 1;
                        document.getElementById('loveMeterFill').style.width = loveLevel + '%';
                    } else {
                        clearInterval(autoFillInterval);
                    }
                }, 300);
            }, 2000);
        }

        // Run initialization when page loads
        init();

        // ========== CONSOLE EASTER EGGS ==========
        console.log('%cüíï Made with infinite love for Khushi! üíï', 
            'font-size: 24px; color: #ff69b4; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);');
        console.log('%c‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ', 
            'color: #a855f7;');
        console.log('%cüéπ Secret Keyboard Shortcuts:', 
            'font-size: 14px; color: #ffd700; font-weight: bold;');
        console.log('%c   L = Love confetti burst', 
            'font-size: 12px; color: #ff69b4;');
        console.log('%c   H = Send virtual hug (GIF)', 
            'font-size: 12px; color: #ff69b4;');
        console.log('%c   K = Khushi special! üíñ', 
            'font-size: 12px; color: #ff69b4;');
        console.log('%c   I = Instant infinity mode', 
            'font-size: 12px; color: #ff69b4;');
        console.log('%c   J = Open love jar', 
            'font-size: 12px; color: #ff69b4;');
        console.log('%c   C = More confetti!', 
            'font-size: 12px; color: #ff69b4;');
        console.log('%c   G = GIF hug animation', 
            'font-size: 12px; color: #ff69b4;');
        console.log('%c‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ', 
            'color: #a855f7;');
    </script>

    <!-- ========== MUSIC CONTROLLER ========== -->
    <script>
        const music = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('musicToggle');
        let isMusicPlaying = false;
        let hasMusicInteracted = false;

        // Music settings
        music.volume = 0.4;
        const startTime = 9; // Start from 9 seconds

        // Create visualizer bars
        const barsContainer = document.createElement('div');
        barsContainer.className = 'music-bars';
        for (let i = 0; i < 4; i++) {
            const bar = document.createElement('div');
            bar.className = 'music-bar';
            barsContainer.appendChild(bar);
        }
        musicBtn.innerHTML = '';
        musicBtn.appendChild(document.createTextNode('üéµ'));

        // Function to start music
        function startMusic() {
            music.currentTime = startTime;
            music.play().then(() => {
                isMusicPlaying = true;
                hasMusicInteracted = true;
                updateMusicButton();
            }).catch(err => {
                console.log('Music play failed:', err);
            });
        }

        // Function to update button appearance
        function updateMusicButton() {
            if (isMusicPlaying) {
                musicBtn.innerHTML = '';
                musicBtn.appendChild(barsContainer.cloneNode(true));
                musicBtn.classList.add('playing');
            } else {
                musicBtn.innerHTML = 'üéµ';
                musicBtn.classList.remove('playing');
            }
        }

        // Toggle music function
        function toggleMusic(e) {
            e.stopPropagation();
            
            if (!hasMusicInteracted) {
                startMusic();
                return;
            }

            if (isMusicPlaying) {
                music.pause();
                isMusicPlaying = false;
            } else {
                music.currentTime = startTime;
                music.play();
                isMusicPlaying = true;
            }
            updateMusicButton();
        }

        // Button click handler
        musicBtn.addEventListener('click', toggleMusic);

        // All possible interaction events for autoplay
        const interactionEvents = [
            'click',
            'touchstart',
            'mousemove',
            'scroll',
            'keydown'
        ];

        // Handler for first interaction
        function onFirstInteraction(e) {
            if (hasMusicInteracted) return;
            if (e.target.id === 'musicToggle') return;
            
            startMusic();
            removeInteractionListeners();
        }

        // Add interaction listeners
        function addInteractionListeners() {
            interactionEvents.forEach(event => {
                document.addEventListener(event, onFirstInteraction, { passive: true });
            });
        }

        // Remove interaction listeners
        function removeInteractionListeners() {
            interactionEvents.forEach(event => {
                document.removeEventListener(event, onFirstInteraction);
            });
        }

        // Audio error handling
        music.addEventListener('error', (e) => {
            console.error('Audio error:', e);
            console.error('Audio error code:', music.error?.code);
            console.error('Audio error message:', music.error?.message);
        });

        music.addEventListener('loadeddata', () => {
            console.log('Audio loaded successfully');
        });

        // Try autoplay first
        music.currentTime = startTime;
        music.play().then(() => {
            isMusicPlaying = true;
            hasMusicInteracted = true;
            updateMusicButton();
            removeInteractionListeners();
        }).catch((err) => {
            console.log('üéµ Autoplay blocked:', err.message);
            console.log('üéµ Waiting for interaction to play music...');
            addInteractionListeners();
        });

        // Handle page visibility (pause when tab hidden)
        document.addEventListener('visibilitychange', () => {
            if (!hasMusicInteracted) return;
            
            if (document.hidden && isMusicPlaying) {
                music.pause();
            } else if (!document.hidden && isMusicPlaying) {
                music.play();
            }
        });

        // When song loops, restart from 9 seconds
        music.addEventListener('ended', () => {
            music.currentTime = startTime;
            music.play();
        });

        // Double-check loop reset
        music.addEventListener('timeupdate', () => {
            if (music.duration - music.currentTime < 0.5) {
                music.currentTime = startTime;
            }
        });
    </script>
</body>
</html>
